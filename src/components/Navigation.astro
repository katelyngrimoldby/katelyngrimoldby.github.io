---
import Menu from '../assets/menu.astro';
import Close from '../assets/close.astro';
---

<button class='open-menu'><Menu /></button>
<nav
  class='nav'
  data-js='nav'
>
  <button class='close-menu'><Close /></button>
  <ul>
    <li>
      <a href='/'>Home</a>
    </li>
    <li>
      <a href='/projects'>Projects</a>
    </li>
    <li><a href='/articles'>Articles</a></li>
    <li>
      <a
        href='https://www.linkedin.com/in/katelyn-grimoldby/'
        target='_blank'
        >LinkedIn</a
      >
    </li>
    <li>
      <a
        href='https://github.com/katelyngrimoldby'
        target='_blank'
        >GitHub</a>
    </li>
  </ul>
</nav>
<div
  class='backdrop'
  data-js='backdrop'
>
</div>

<style>
  @media screen and (min-width: 0px) {
    button {
      border: none;
      background-color: transparent;
    }

    .nav,
    .nav-visible {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 999;
      height: 100vh;
      min-width: 50%;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 1rem;
      transition: transform 300ms ease-in-out;
      background-color: var(--background-primary);

      ul {
        width: 100%;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        align-items: flex-start;

        a {
          font-size: 1.25rem;
          color: var(--foreground-secondary);

          &:hover {
            color: var(--foreground-accent);
          }
        }
      }
    }
    .backdrop,
    .backdrop-visible {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      background-color: black;
      opacity: 0.2;
    }

    .nav {
      transform: translate(-100%);
    }

    .nav-visible {
      transform: translate(0);
    }

    .backdrop {
      display: none;
    }

    .backdrop-visible {
      display: block;
    }
  }

  @media screen and (min-width: 768px) {
    button {
      display: none;
    }
    .nav,
    .nav-visible {
      position: static;
      transform: translate(0);
      height: auto;
      padding: 0;
      background-color: transparent;

      ul {
        flex-direction: row;
      }
    }
  }
</style>

<script>
  const nav = document.querySelector('[data-js="nav"]');
  const backdrop = document.querySelector('[data-js="backdrop"');

  document.querySelector('.open-menu')?.addEventListener('click', () => {
    if (nav) nav.className = 'nav-visible';
    if (backdrop) backdrop.className = 'backdrop-visible';
  });

  document.querySelector('.close-menu')?.addEventListener('click', () => {
    if (nav) nav.className = 'nav';
    if (backdrop) backdrop.className = 'backdrop';
  });

  backdrop?.addEventListener('click', () => {
    if (nav) nav.className = 'nav';
    if (backdrop) backdrop.className = 'backdrop';
  });
</script>
